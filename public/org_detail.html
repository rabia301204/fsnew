

  <!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

     <style>
    .form_style{max-width:700px;
        margin:40px auto ;
        border-style: ridge;
        padding-bottom:  20px;
       
   
    

    }
  
  </style> 
  <script>
  


//for pic
  
     function showPrev(fileRef,prevRef)
         {
                         const [file] = fileRef.files
                            if (file) {
                                prevRef.src = URL.createObjectURL(file)
                            }
        }
        //for search
        $(document).ready(function(){
          $("#btnFetchWithAjax").click(function(){
            let obj={
              type:"get",
              url:"/get_one",
              data:{
                //name
                orgemail:$("#orgemail").val(),

              }


            }
          
            $.ajax(obj).then(
              function(responseJsonAry){
                  let orgname=responseJsonAry[0].orgname;

    let regno=responseJsonAry[0].regno;
    let address=responseJsonAry[0].address;
    let city=responseJsonAry[0].city;
    let sports=responseJsonAry[0].sports;
    let website=responseJsonAry[0].website;
    let insta=responseJsonAry[0].insta;
    let head=responseJsonAry[0].head;
    let contact=responseJsonAry[0].contact;
    let picurl=responseJsonAry[0].picurl;
                alert(orgname+"\n"+regno+"\n"+ address+"\n"+city+"\n"+sports+"\n"+website+"\n"+insta+"\n"+head+"\n"+contact+"\n"+picurl);
              $("#orgname").val(orgname);
              $("#regno").val(regno);
              $("#address").val(address);
              $("#city").val(city);
              $("#sports").val(sports);
              $("#website").val(website);
              $("#insta").val(insta);
              $("#head").val(head);
              $("#contact").val(contact);
              $("#prev").prop("src",picurl);
              $("#hdn").val(picurl);
              
              })
                .fail(function(err){alert(err.message)})
          })
        })

  
    </script>
    <script>
    function showUser(){
      let activeUser=localStorage.getItem("activeUser");
      document.getElementById("orgemail").value=activeUser;
    }
  </script>
  </head>
  <body onload="showUser()">
    <div class="container row mx-auto  ">
      <form  class="row g-3 form_style " method="post" enctype="multipart/form-data" id="orgForm" action="/org_form" >
        <input type="hidden" id="hdn" name="hdn">
          <h3 class="text-center mb-4">Organiser Details Form</h3>
  <div class="col-md-8">
    <label for="inputEmail4" class="form-label">Email</label>
    <input type="email" class="form-control" id="orgemail" name="orgemail" >
  </div>
   <div class="col-md-4">
   <label>   <br> </label>
   <input type="submit" class="btn btn-dark w-100" value="search" id="btnFetchWithAjax">
  </div>

  <div class="col-md-8">
    <label for="inputPassword4" class="form-label">Organisation Name</label>
    <input type="text" class="form-control" id="orgname" name="orgname">
  </div>
  <div class="col-md-4">
    <label for="inputAddress" class="form-label">Registration number</label>
    <input type="number" class="form-control" id="regno" name="regno">
  </div>
  <div class="col-md-8">
    <label for="inputAddress2" class="form-label">Address </label>
    <input type="text" class="form-control" id="address"  name="address">
  </div>
  <div class="col-md-4">
    <label for="inputCity" class="form-label">City</label>
    <input type="text" class="form-control" id="city" name="city">
  </div>
  <div class="col-md-8">
    <label for="inputState" class="form-label">Deals in Sports</label>
   <input type="text" class="form-control" id="sports" name="sports">
  </div>
  <div class="col-md-4">
    <label for="inputZip" class="form-label">Website</label>
    <input type="text" class="form-control" id="website" name="website">
  </div>
  <div class="col-md-8">
    <label for="inputState" class="form-label">Instagram Link</label>
   <input type="text" class="form-control" id="insta" name="insta">
  </div>
  <div class="col-md-4">
    <label for="inputZip" class="form-label">Head of Organisation</label>
    <input type="text" class="form-control" id="head" name="head" >
  </div>
  <div class="col-md-8">
    <label for="inputZip" class="form-label">Contact Number</label>
    <input type="number" class="form-control" id="contact" name="contact">
  </div>
  <div class="col-md-8">
          <label class="form-label">Registration Certificate Pic</label>
          <input class="form-control" type="file"  name="profilepic" id="profilepic" onchange="showPrev(profilepic,prev)"/>
         
          <img src="pics/login.png" width="100" height="100" id="prev" alt="preview" >
        </div>
  <div class="col-md-8 mt-3">
   <button type="submit" id="submitOrg" class="btn btn-primary">Submit</button>

  </div>
    <div class="col-md-4 mt-3">
    <button type="submit"  class="btn btn-primary" formaction="/modify_form">modify</button>
  </div>


</form>

    </div>
    
  </body>
</html>