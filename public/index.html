<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>index page</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style/style.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- ===== ADDED: OTP box style only ===== -->
    <style>
      .otp-box {
        width: 44px;
        height: 50px;
        text-align: center;
        font-size: 22px;
        font-weight: bold;
        border: 2px solid #ccc;
        border-radius: 8px;
        outline: none;
        transition: border 0.3s;
      }
      .otp-box:focus {
        border-color: #0d6efd;
        box-shadow: 0 0 6px rgba(13,110,253,0.4);
      }
    </style>
    <!-- ===== END OTP style ===== -->

    <script>
    $(document).ready(function () {

      // Show signup modal
      $("#btn").click(function () {
        $("#signupWin").fadeIn(200);
        $("#loginWin").fadeOut(0);
      });

      // Show login modal
      $("#btn2").click(function () {
        $("#loginWin").fadeIn(200);
        $("#signupWin").fadeOut(0);
      });

      // Close buttons
      $("#crossSignup").click(function () {
        $("#signupWin").fadeOut(200);
      });

      $("#crossLogin").click(function () {
        $("#loginWin").fadeOut(200);
      });

      // <!--validation-->
      $("#txtEmail").keyup(function(){
        let email=$(this).val().trim();
        let regex=/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/;
        if(email=== ""){
            $("#errEmail").html("Empty").addClass("not-ok").removeClass("ok");
            $("#errPicE").addClass("not-ok-pic").removeClass("ok-pic");
            $(this).focus();
        }
        else if(regex.test(email)==false){
            $("#errEmail").html("Invalid Email").addClass("not-ok").removeClass("ok");
            $("#errPicE").addClass("not-ok-pic").removeClass("ok-pic");
            $(this).focus();
        }
        else {
            $("#errEmail").html("Valid Email").addClass("ok").removeClass("not-ok");
            $("#errPicE").addClass("ok-pic").removeClass("not-ok-pic");
        }
      });

      $("#txtPwd").keyup(function(){
        let regex = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/;
        let pwd = $(this).val();
        if (pwd === "") {
            $("#lblPwd").html("Empty").addClass("not-ok").removeClass("ok");
        }
        else if (regex.test(pwd)) {
            $("#lblPwd").html("Valid Password").addClass("ok").removeClass("not-ok");
        } else {
            $("#lblPwd").html("Invalid Password").addClass("not-ok").removeClass("ok");
        }
      });

      $("#eye").click(function(){
        let txt=$("#txtPwd").prop("type");
        if(txt=="password"){
            $("#txtPwd").prop("type","text");
            $("#eye").removeClass("fa-eye").addClass("fa-eye-slash");
        }
        else{
            $("#txtPwd").prop("type","password");
            $("#eye").removeClass("fa-eye-slash").addClass("fa-eye");
        }
      });

      // ===== CHANGED: btnSubmit - now shows OTP modal on success =====
      $("#btnSubmit").click(function () {
        let emailid = $("#txtEmail").val().trim();
        let pwd = $("#txtPwd").val().trim();
        let usertype = $("#usertype").val();

        let obj = {
            type: "get",
            url: "/signup-one",
            data: {
                txtEmail: emailid,
                txtPwd: pwd,
                usertype: usertype
            }
        };

        $.ajax(obj).then(
            function (response) {
                if (response == "OTP_SENT") {
                    // ADDED: hide signup, show OTP modal
                    $("#signupWin").fadeOut(200);
                    $("#otpWin").fadeIn(200);
                } else {
                    alert(response);
                }
            },
            function (err) {
                alert("Error: " + err.message);
            }
        );
      });
      // ===== END CHANGE =====

      // ===== ADDED: OTP functionality =====
      // auto jump between boxes
      $(".otp-box").keyup(function () {
        if ($(this).val().length === 1) $(this).next(".otp-box").focus();
        if ($(this).val().length === 0) $(this).prev(".otp-box").focus();
      });

      // verify OTP button
      $("#btnVerifyOtp").click(function () {
        let otp = $("#o1").val() + $("#o2").val() + $("#o3").val() +
                  $("#o4").val() + $("#o5").val() + $("#o6").val();
        let email = $("#txtEmail").val().trim();
        $.ajax({
            url: "/verify-otp",
            type: "get",
            data: { email: email, otp: otp },
            success: function (res) {
                if (res == "SUCCESS") {
                    $("#otpWin").fadeOut(200);
                    alert("Signup Successful! Please Login.");
                } else {
                    $("#otpMsg").html("<span style='color:red;font-weight:bold;'>" + res + "</span>");
                }
            },
            error: function () { alert("Something went wrong"); }
        });
      });

      // close OTP modal
      $("#crossOtp").click(function () {
        $("#otpWin").fadeOut(200);
      });

      // resend OTP
      $("#resendOtp").click(function (e) {
        e.preventDefault();
        let email = $("#txtEmail").val().trim();
        $.ajax({
            url: "/resend-otp",
            type: "get",
            data: { email: email },
            success: function (res) {
                $("#otpMsg").html("<span style='color:green;'>" + res + "</span>");
            }
        });
      });
      // ===== END OTP functionality =====

      // UNCHANGED: login
      $("#loginSubmit").click(function () {
        let emailid = $("#loginEmail").val().trim();
        let pwd = $("#loginPass").val().trim();
        $.ajax({
          url: "/do-login",
          type: "get",
          data: { loginEmail: emailid, loginPass: pwd },
          success: function (res) {
            if(res=="Blocked"){ alert("Sorry! ur id is bloacked"); }
            else if(res=="Invalid"){ alert("Invalid emailid or Paasword"); }
            else if(res=="Player"){
              localStorage.setItem("activeUser",emailid);
              location.href="dash_player.html";
            }
            else if(res=="Organizer"){
              localStorage.setItem("activeUser",emailid);
              location.href="dash_org.html";
            }
            else if(res=="Admin"){
              localStorage.setItem("activeUser",emailid);
              location.href="admin_dash.html";
            }
          },
          error: function (err) {
            alert("AJAX error");
            console.log(err);
          }
        });
      });

      // UNCHANGED: contact
      $("#btnContact").click(function () {
        let name = $("#userName").val();
        let email = $("#userEmail").val();
        let msg = $("#userMessage").val();
        $.ajax({
            url: "/save-contact",
            type: "get",
            data: { name: name, email: email, msg: msg },
            success: function (res) { alert(res); },
            error: function () { alert("Error saving data"); }
        });
      });

    });
    </script>
</head>
<body>

  <!-- Navbar - UNCHANGED -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
  <div class="container-fluid d-flex justify-content-between align-items-center">
    <div class="d-flex align-items-center">
      <img src="pics/logo.jpg" alt="Tizen Logo" style="height: 50px; margin-right: 10px;" />
    </div>
    <div class="d-none d-lg-block mx-auto">
      <ul class="navbar-nav flex-row gap-4">
        <li class="nav-item"><a class="nav-link active text-white" href="#">Home</a></li>
        <li class="nav-item"><a class="nav-link active text-white" href="#serve">Our Services</a></li>
        <li class="nav-item"><a class="nav-link active text-white" href="#reach">Reach Us</a></li>
        <li class="nav-item"><a class="nav-link active text-white" href="#con">Contact</a></li>
      </ul>
    </div>
    <div class="d-flex gap-3 me-3">
      <button class="btn btn-primary nav-btn px-4 py-2" id="btn">Signup</button>
      <button class="btn btn-success nav-btn px-4 py-2" id="btn2">Login</button>
    </div>
  </div>
</nav>

    <!-- Signup modal - UNCHANGED -->
<div id="signupWin" class="modal-box">
  <div id="crossSignup" class="cross-btn"></div>
  <p class="form-title">Signup</p>
  <div id="form">
    <div class="form-row">
      <label>Email Id</label><br>
      <input type="text" id="txtEmail" name="txtEmail">
      <div style="display:flex;">
        <div style="margin-right: 10px;" id="errPicE"></div>
        <div id="errEmail"></div>
      </div>
    </div>
  </div>
  <br>
  <div class="form-row">
    <label>Password</label><br>
    <div class="pwd-e">
      <input type="password" id="txtPwd" name="txtPwd">
      <i class="fa-solid fa-eye" id="eye"></i>
    </div>
    <div id="lblPwd"></div>
  </div><br>
  <div class="form-row">
    <label>User Type</label><br>
    <select id="usertype">
      <option>Choose...</option>
      <option value="Player">Player</option>
      <option value="Organizer">Organizer</option>
    </select>
  </div>
  <br>
  <div class="form-row mt-2 d-flex justify-content-center">
    <input type="button" id="btnSubmit" value="Register">
  </div>
</div>

<!-- ===== ADDED: OTP Modal ===== -->
<div id="otpWin" class="modal-box" style="display:none;">
  <div id="crossOtp" class="cross-btn"></div>
  <p class="form-title">Verify OTP</p>
  <p style="text-align:center; color:#666; font-size:14px; margin-bottom:18px;">
    Enter the 6-digit OTP sent to your email
  </p>
  <div style="display:flex; justify-content:center; gap:8px; margin-bottom:18px;">
    <input type="text" id="o1" maxlength="1" class="otp-box">
    <input type="text" id="o2" maxlength="1" class="otp-box">
    <input type="text" id="o3" maxlength="1" class="otp-box">
    <input type="text" id="o4" maxlength="1" class="otp-box">
    <input type="text" id="o5" maxlength="1" class="otp-box">
    <input type="text" id="o6" maxlength="1" class="otp-box">
  </div>
  <div class="form-row d-flex justify-content-center">
    <input type="button" id="btnVerifyOtp" value="Verify OTP">
  </div>
  <p style="text-align:center; margin-top:12px; font-size:13px;">
    <a href="#" id="resendOtp">Resend OTP</a>
  </p>
  <div id="otpMsg" style="text-align:center; margin-top:8px; font-size:13px;"></div>
</div>
<!-- ===== END OTP Modal ===== -->

<!-- Login modal - UNCHANGED -->
<div id="loginWin" class="modal-box">
  <div id="crossLogin" class="cross-btn"></div>
  <p class="form-title">Login</p>
  <div id="form">
    <div class="form-row">
      <label>Email ID</label><br />
      <input type="text" id="loginEmail" />
    </div><br />
    <div class="form-row">
      <label>Password</label><br />
      <input type="password" id="loginPass" />
    </div>
    <br>
    <div><a href="#" data-bs-toggle="modal" data-bs-target="#editSettingsModal">Forgot Password?</a></div>
    <div class="form-row mt-5 d-flex justify-content-center">
      <input type="button" id="loginSubmit" value="Login" />
    </div>
  </div>
</div>

<!-- Sliders - UNCHANGED -->
<div id="carouselExampleDark" class="carousel carousel-dark slide">
  <div class="carousel-indicators">
    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="1" aria-label="Slide 2"></button>
    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="2" aria-label="Slide 3"></button>
  </div>
  <div class="carousel-inner">
    <div class="carousel-item active" data-bs-interval="10000">
      <img src="pics/ppp.jpg" class="d-block w-100" alt="...">
      <div class="carousel-caption d-none d-md-block"></div>
    </div>
    <div class="carousel-item" data-bs-interval="2000">
      <img src="pics/s4.jpg" class="d-block w-100" alt="...">
      <div class="carousel-caption d-none d-md-block"></div>
    </div>
    <div class="carousel-item">
      <img src="pics/s5.jpg" class="d-block w-100" alt="...">
      <div class="carousel-caption d-none d-md-block"></div>
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

<!-- Our Services - UNCHANGED -->
<div class="ser" id="serve">
  <b><b>Our Services</b></p>
</div>
<div class="d-flex justify-content-center gap-5 flex-wrap mt-5">
  <div class="card service-card" style="width: 22rem;">
    <img src="pics/register.jpg" class="card-img-top" alt="...">
    <div class="card-body">
      <h5 class="card-title">Register Organization</h5>
      <p class="card-text">Bring your events to life. Easily create and publish new tournaments, matches,
        or gatherings directly on our platform. Reach a wider audience and attract participants with our
        intuitive event posting features.</p>
    </div>
  </div>
  <div class="card service-card" style="width: 22rem;">
    <img src="pics/post.jpg" class="card-img-top" alt="...">
    <div class="card-body">
      <h5 class="card-title">Post Events</h5>
      <p class="card-text">Organize and publish your sports events with ease.
        Our platform lets you create tournaments, matches, and gatherings in minutes.
        Promote your events to a wider audience.
        Perfect for schools, colleges, clubs, and independent organizers.</p>
    </div>
  </div>
  <div class="card service-card" style="width: 22rem;">
    <img src="pics/discover.jpg" class="card-img-top" alt="...">
    <div class="card-body">
      <h5 class="card-title">Discover Nearby Events</h5>
      <p class="card-text">Stay updated with the latest sports events happening around you.
        Find tournaments, matches, and activities based on your location and interests.
        Join local events, connect with fellow athletes, and grow your network.</p>
    </div>
  </div>
</div>

<!-- Our Mission - UNCHANGED -->
<div class="ser">
  <b><b>Our Mission</b></p>
</div>
<div class="container mission my-5">
  <div class="row align-items-center">
    <div class="col-md-6">
      <img src="pics/mission.jpg" class="img-fluid rounded shadow" alt="Mission">
    </div>
    <div class="col-md-6">
      <p class="fs-5 mt-3 mt-md-0">
        To revolutionize sports participation and event management by empowering players, organizers,
        and communities with a smart, seamless, and inclusive platform that connects, engages, and
        inspires through the spirit of competition and collaboration.
      </p>
    </div>
  </div>
</div>

<!-- Reach Us - UNCHANGED -->
<div class="ser" id="reach">
  <b><b>Reach Us</b></p>
</div>
<div>
  <div>
    <div class="container mb-5">
      <div class="row g-4">
        <div class="col-md-6">
          <div class="card h-100">
            <div class="card-body">
              <h5 class="card-title text-success"><i class="fas fa-map-marker-alt me-2"></i>Location</h5>
              <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d859.2937839767154!2d76.65977775817477!3d30.516086454976772!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x390fc32344a6e2d7%3A0x81b346dee91799ca!2sChitkara%20University!5e0!3m2!1sen!2sin!4v1753246257184!5m2!1sen!2sin"
                width="500" height="300" style="border:0;" allowfullscreen="" loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card h-100">
            <div class="card-body">
              <h5 class="card-title text-success"><i class="fas fa-envelope me-2"></i>Contact Info</h5>
              <form id="contactForm">
                <p>Email: your_email@gmail.com</p>
                <p>Phone: +91 9592519041</p>
                <hr>
                <div class="mb-3">
                  <label class="form-label">Enter Your Name</label>
                  <input type="text" class="form-control" id="userName">
                </div>
                <div class="mb-3">
                  <label class="form-label">Email</label>
                  <input type="email" class="form-control" id="userEmail">
                </div>
                <div class="mb-3">
                  <label class="form-label">Message</label>
                  <textarea class="form-control" id="userMessage" rows="4"></textarea>
                </div>
                <button type="button" class="btn btn-primary" id="btnContact">Send Message</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

</body>
</html>